<?xml version="1.0" encoding="UTF-8"?>
<flow xmlns="http://www.springframework.org/schema/webflow"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.springframework.org/schema/webflow
        http://www.springframework.org/schema/webflow/spring-webflow-2.0.xsd">

	<persistence-context />
	<var name="SignupForm" class="com.baker.social.signup.SignupForm" />
	<!--
	<on-start>
	 	<evaluate expression="org.springframework.social.connect.web.ProviderSignInUtils.getConnection(#{externalContext.nativeContext})" result="flowScope.connection" ></evaluate>
		<evaluate expression="com.baker.social.signup.SignupForm.fromProviderUser(#{flowScope.connection.fetchUserProfile()})" result="flowScope.orderForm" /> 	
	
		<evaluate expression="com.baker.social.signup.SignupController.signupForm(flowRequestContext)" result="flowScope.orderForm" />
	</on-start>
-->
	<view-state id="signup" view="view.signup" model="signupForm">
		<transition on="signin" to="signin_state" />
		<transition on="submit" to="subscription_ok" />
		<transition on="lostpassword" to="recovery_form" />
	</view-state>
	
	<view-state id="signin_state" view="view.signin" />
	
	<view-state id="subscription_ok" view="subscription_ok" />

	<view-state id="recovery_form" view="recovery_form" />
	
</flow>